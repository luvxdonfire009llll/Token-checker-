<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Facebook Token Checker</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 0 20px; }
    input, textarea, button { padding: 8px; font-size: 14px; }
    .box { border: 1px solid #ddd; padding: 14px; margin-bottom: 16px; border-radius: 6px; }
    pre { background:#f6f6f6; padding:10px; border-radius:4px; overflow:auto; }
  </style>
</head>
<body>
  <h1>Facebook Token Checker</h1>

  <div class="box">
    <h3>Check single token</h3>
    <p>Paste a Facebook access token and click Check.</p>
    <textarea id="tokenInput" rows="3" style="width:100%"></textarea><br/><br/>
    <button id="checkBtn">Check Token</button>
    <h4>Result:</h4>
    <pre id="singleResult">No result yet</pre>
  </div>

  <div class="box">
    <h3>Check tokens from file (.txt)</h3>
    <p>Upload a plaintext file with one token per line.</p>
    <input type="file" id="fileInput" accept=".txt" />
    <button id="fileBtn">Upload & Check</button>
    <h4>Results:</h4>
    <pre id="fileResult">No result yet</pre>
  </div>

  <script>
    document.getElementById('checkBtn').onclick = async () => {
      const token = document.getElementById('tokenInput').value.trim();
      if (!token) {
        alert('Please paste a token');
        return;
      }
      document.getElementById('singleResult').textContent = 'Checking...';
      try {
        const resp = await fetch('/api/check-token', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ token })
        });
        const data = await resp.json();
        document.getElementById('singleResult').textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById('singleResult').textContent = 'Error: ' + err.message;
      }
    };

    document.getElementById('fileBtn').onclick = async () => {
      const f = document.getElementById('fileInput').files[0];
      if (!f) { alert('Select a .txt file'); return; }
      const form = new FormData();
      form.append('tokensFile', f);
      document.getElementById('fileResult').textContent = 'Uploading and checking...';
      try {
        const resp = await fetch('/api/check-file', {
          method: 'POST',
          body: form
        });
        const data = await resp.json();
        document.getElementById('fileResult').textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        document.getElementById('fileResult').textContent = 'Error: ' + err.message;
      }
    };
  </script>
</body>
</html>
